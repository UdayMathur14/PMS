@{
    ViewData["Title"] = "AddProduct";
}

<h2>AddProduct</h2>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

<div class="mt-3">
    <label class="form-label">Category</label>
    <select id="ddl_cat">
 
    </select>
</div>


<div class="mt-3">
    <label class="form-label">Product Name</label>
    <input type="text" class="form-control" id="ProductName" />
</div>
<div class="mt-3">
    <label class="form-label">Product Price</label>
    <input type="text" class="form-control" id="Product_Price" />
</div>
<div class="mt-3">
    <label class="form-label">Product Quantity</label>
    <input type="text" class="form-control" id="Product_Quantity" />
</div>
<div class="mt-3">
    <label class="form-label">Is Active</label>
    <input type="text" class="form-control" id="IsActive" />
</div>
<div class="mt-3">
    <label class="form-label">Image Path Url</label>
    <input type="text" class="form-control" id="Image_Path Url" />
</div>
<br />
<div class="mt-3">
    <button id="mybutton" type="button" class="btn btn-primary">Save</button>
</div>



<script>
    $(document).ready(function () {
        // Your jQuery code goes here
        //
        var dropdown = $("#ddl_cat");
        dropdown.append($('<option>', {
            value: '',
            text: 'Select an option'
        }));
        CategoryBind();
    });

    $('#mybutton').click(function () {
        alert('Button clicked using jQuery!');
        //var cat_id = $('#ddl_cat').val();

        var settings = {
            "url": "/ProductMaster/Insert_Product",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                "ProductName": $("#ProductName").val(),
                "Product_Price": $("#Product_Price").val(),
                "Product_Quantity": $("#Product_Quantity").val(),
                "IsActive": $("#IsActive").val(),
                "spmode" :0
            }),
        };

        $.ajax(settings).done(function (response) {
            console.log(response);
        });


    });

    function CategoryBind()
    {
        var settings = {
            "url": "/ProductMaster/CategorySearch",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                "is_active": 1,
                "spmode": 0
            }),
        };

        $.ajax(settings).done(function (response) {
            //console.log(response);
            var res = response.table;

            
            $.each(res, function () {
                $("#ddl_cat").append($("<option/>").val(this.categoryID).text(this.categoryName));
            });

        });

        $("#mybutton").click(function () {
            var valid = $("#ProductName").val().trim();

            if (!valid) {
                alert("Please enter a value.");
            } else if (valid.length < 3) {
                alert("Input value must be at least 3 characters long.");
            } else {
                alert("Input value is valid: " + valid);
            }

            var valid1 = $("#Product_Price").val().trim();

            if (!valid1) {
                alert("Please enter a value.");
            } else if (!/^\d+$/.test(valid1)) {
                alert("Input value must be a valid integer.");
            } else {
                var integerValue = parseInt(inputValue, 10);
                alert("Input value is a valid integer: " + integerValue);
            }



        });

    }
</script>